{"version":3,"sources":["../../../../src/smart/STabs/index.js"],"names":["STabs","tabBarPosition","initialPage","page","locked","onChangeTab","onScroll","scrollWithoutAnimation","props","currentPage","state","scrollValue","Value","containerWidth","get","width","goToPage","pageNumber","OS","offset","scrollView","scrollTo","x","y","animated","setPageWithoutAnimation","setPage","contentKey","callback","tabChange","bind","children","newKeys","setState","sceneKeys","prevPage","i","ref","tabContent","from","value","setValue","content","getContent","e","offsetX","nativeEvent","contentOffset","getScrollValue","flex","position","map","child","idx","Children","renderTabBar","cloneElement","vertical","tabBarProps","tabs","tabLabel","tabIcon","activeTab","iconPresent","tabBarTextStyle","tabBarIconStyle","tabBarUnderlineColor","underlineStyle","tabBarStyle","_root","c","renderTab","renderContent","bottom","propTypes","style","PropTypes","object","number","string","bool","StyledSTabs"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Animated, Dimensions, ScrollView, Platform, ViewPagerAndroid } from 'react-native';\r\nimport { connectStyle } from 'native-base-shoutem-theme';\r\nimport mapPropsToStyleNames from '../../Utils/mapPropsToStyleNames';\r\n\r\nimport { TabBar } from './TabBar';\r\nclass STabs extends Component {\r\n\r\n  static get defaultProps() {\r\n    return {\r\n      tabBarPosition: 'top',\r\n      initialPage: 0,\r\n      page: -1,\r\n      locked: true,\r\n      onChangeTab: () => {},\r\n      onScroll: () => {},\r\n      scrollWithoutAnimation: false,\r\n    };\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const currentPage = (this.props.initialPage) ? this.props.initialPage : 0;\r\n    this.state = {\r\n      scrollValue: new Animated.Value(this.props.initialPage),\r\n      containerWidth: Dimensions.get('window').width,\r\n      currentPage,\r\n    };\r\n  }\r\n  componentWillReceiveProps(props) {\r\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\r\n      this.goToPage(props.page);\r\n    }\r\n  }\r\n\r\n  goToPage(pageNumber) {\r\n    if (Platform.OS === 'ios') {\r\n      const offset = pageNumber * this.state.containerWidth;\r\n      if (this.scrollView) {\r\n        this.scrollView.scrollTo({ x: offset, y: 0, animated: !this.props.scrollWithoutAnimation });\r\n      }\r\n    } else if (this.scrollView) {\r\n      if (this.props.scrollWithoutAnimation) {\r\n        this.scrollView.setPageWithoutAnimation(pageNumber);\r\n      } else {\r\n        this.scrollView.setPage(pageNumber);\r\n      }\r\n    }\r\n\r\n    const currentPage = this.state.currentPage;\r\n    this.contentKey({\r\n      page: pageNumber,\r\n      callback: this.tabChange.bind(this, currentPage, pageNumber),\r\n    });\r\n  }\r\n\r\n\r\n  contentKey({ page, children = this.props.children, callback = () => {} }) {\r\n    const newKeys = page;\r\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\r\n  }\r\n\r\n  tabChange(prevPage, currentPage) {\r\n    this.props.onChangeTab({\r\n      i: currentPage,\r\n      ref: this.tabContent()[currentPage],\r\n      from: prevPage,\r\n    });\r\n  }\r\n\r\n  getScrollValue(value) {\r\n    this.state.scrollValue.setValue(value);\r\n    this.props.onScroll(value);\r\n  }\r\n\r\n  renderContent() {\r\n    const content = this.getContent();\r\n    if (Platform.OS === 'ios') {\r\n      return (<ScrollView\r\n        horizontal\r\n        pagingEnabled\r\n        automaticallyAdjustContentInsets={false}\r\n        contentOffset={{ x: this.props.initialPage * this.state.containerWidth }}\r\n        ref={(scrollView) => { this.scrollView = scrollView; }}\r\n        onScroll={(e) => {\r\n          const offsetX = e.nativeEvent.contentOffset.x;\r\n          this.getScrollValue(offsetX / this.state.containerWidth);\r\n        }}\r\n        scrollEventThrottle={16}\r\n        scrollsToTop={false}\r\n        showsHorizontalScrollIndicator={false}\r\n        scrollEnabled={!this.props.locked}\r\n        directionalLockEnabled\r\n        alwaysBounceVertical={false}\r\n      >\r\n        {content}\r\n      </ScrollView>);\r\n    } else {\r\n      return (<ViewPagerAndroid\r\n        style={{ flex: 1 }}\r\n        initialPage={this.props.initialPage}\r\n        scrollEnabled={!this.props.locked}\r\n        onPageScroll={(e) => {\r\n          const { offset, position } = e.nativeEvent;\r\n          this.getScrollValue(position + offset);\r\n        }}\r\n        ref={(scrollView) => { this.scrollView = scrollView; }}\r\n      >\r\n        {content}\r\n      </ViewPagerAndroid>);\r\n    }\r\n  }\r\n\r\n  getContent() {\r\n    return this.tabContent().map((child, idx) => <View\r\n      key={idx}\r\n      style={{ width: this.state.containerWidth }}\r\n    >\r\n      {child}\r\n    </View>);\r\n  }\r\n\r\n  tabContent() {\r\n    return React.Children.map(this.props.children, child => child);\r\n  }\r\n\r\n  renderTab(props) {\r\n    if (this.props.renderTabBar === false) {\r\n      return null;\r\n    } else if (this.props.renderTabBar) {\r\n      return React.cloneElement(this.props.renderTabBar(props), props);\r\n    } else {\r\n      return <TabBar {...props} vertical={this.props.vertical} />;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const tabBarProps = {\r\n      goToPage: this.goToPage.bind(this),\r\n      tabs: this.props.children.map(child => child.props.tabLabel),\r\n      tabIcon: this.props.children.map(child => child.props.tabIcon),\r\n      activeTab: this.state.currentPage,\r\n      iconPresent: (this.props.children[0].props.tabIcon) ? true : false,\r\n      tabBarTextStyle: this.props.tabBarTextStyle,\r\n      tabBarIconStyle: this.props.tabBarIconStyle,\r\n      tabBarUnderlineColor: this.props.tabBarUnderlineColor,\r\n      underlineStyle: this.props.underlineStyle,\r\n      tabBarStyle: this.props.tabBarStyle,\r\n      scrollValue: this.state.scrollValue,\r\n    };\r\n\r\n    return (\r\n      <View ref={c => this._root = c} {...this.props}>\r\n        {this.props.tabBarPosition === 'top' && this.renderTab(tabBarProps)}\r\n        {this.renderContent()}\r\n        <View style={(this.props.tabBarPosition === 'bottom') ? { bottom: (Platform.OS === 'ios') ? 0 : 23 } : {}}>\r\n          {this.props.tabBarPosition === 'bottom' && this.renderTab(tabBarProps)}\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nSTabs.propTypes = {\r\n  ...View.propTypes,\r\n  style: React.PropTypes.object,\r\n  initialPage: React.PropTypes.number,\r\n  tabBarPosition: React.PropTypes.string,\r\n  tabBarTextStyle: React.PropTypes.object,\r\n  tabBarIconStyle: React.PropTypes.object,\r\n  tabBarStyle: React.PropTypes.object,\r\n  underlineStyle: React.PropTypes.object,\r\n  vertical: React.PropTypes.bool,\r\n};\r\n\r\nconst StyledSTabs = connectStyle('NativeBase.STabs', {}, mapPropsToStyleNames)(STabs);\r\n\r\nexport {\r\n  StyledSTabs as STabs,\r\n};\r\n"]}