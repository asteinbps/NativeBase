{"version":3,"sources":["../../../src/basic/Item.js"],"names":["Item","props","state","text","topAnim","Value","opacAnim","inputProps","getRef","_inputRef","timing","toValue","duration","start","label","labelProps","newLabel","floatingLabel","isFocused","push","createElement","key","float","style","fontSize","lineHeight","floatUp","floatBack","newChildren","childrenArray","Children","toArray","children","remove","item","type","input","icon","iconProps","length","top","position","left","last","right","opacity","paddingTop","OS","undefined","paddingBottom","renderLabel","setState","onFocus","onBlur","onChangeText","c","stackedLabel","flexDirection","flex","width","deviceWidth","marginTop","roundedInputGroup","borderWidth","rounded","borderRadius","inputGroupRoundedBorderRadius","defaultProps","getInitialStyle","_root","prepareRootProps","renderChildren","childrenType","propName","component","error","prop","Error","displayName","propTypes","PropTypes","object","inlineLabel","bool","fixedLabel","success","StyledItem"],"mappings":"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","file":"Item.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { TouchableOpacity, Animated, Platform, View } from 'react-native';\r\nimport { Input } from './Input';\r\nimport { Label } from './Label';\r\nimport { Icon } from './Icon';\r\n\r\nimport { connectStyle } from '@shoutem/theme';\r\nimport variables from '../theme/variables/platform';\r\nimport computeProps from '../Utils/computeProps';\r\nimport mapPropsToStyleNames from '../Utils/mapPropsToStyleNames';\r\nimport _ from 'lodash';\r\n\r\nclass Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text: '',\r\n      topAnim: new Animated.Value(18),\r\n      opacAnim: new Animated.Value(1),\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    if(this.inputProps && this.inputProps.getRef)\r\n    this.inputProps.getRef(this._inputRef);\r\n  }\r\n\r\n  floatBack() {\r\n    Animated.timing(this.state.topAnim, {\r\n      toValue: 18,\r\n      duration: 150,\r\n    }).start();\r\n    Animated.timing(this.state.opacAnim, {\r\n      toValue: 1,\r\n      duration: 150,\r\n    }).start();\r\n  }\r\n\r\n  floatUp() {\r\n    Animated.timing(this.state.topAnim, {\r\n      toValue: -22,\r\n      duration: 150,\r\n    }).start();\r\n    Animated.timing(this.state.opacAnim, {\r\n      toValue: 0.7,\r\n      duration: 150,\r\n    }).start();\r\n  }\r\n\r\n  renderLabel(label, labelProps) {\r\n    const newLabel = [];\r\n    if (this.props.floatingLabel) {\r\n      if (this.state.isFocused) {\r\n        newLabel.push(React.createElement(\r\n          Label,\r\n          {\r\n            ...labelProps,\r\n            key: 'newFLabel',\r\n            float: true,\r\n            style: {\r\n              fontSize: 15,\r\n              lineHeight: 30,\r\n              ...labelProps.style,\r\n            }\r\n          }\r\n        ));\r\n        this.floatUp();\r\n      } else {\r\n        newLabel.push(label);\r\n        this.floatBack();\r\n      }\r\n    } else {\r\n      newLabel.push(React.createElement(\r\n          Label,\r\n        {\r\n          ...labelProps,\r\n          key: 'newLabel',\r\n        }\r\n        ));\r\n    }\r\n    return newLabel;\r\n  }\r\n\r\n  renderChildren() {\r\n    const newChildren = [];\r\n    const childrenArray = React.Children.toArray(this.props.children);\r\n\r\n    let label = [];\r\n    let labelProps = {};\r\n    label = _.remove(childrenArray, (item) => {\r\n      if (item.type === Label) {\r\n        labelProps = item.props;\r\n        return item;\r\n      }\r\n    });\r\n\r\n    let input = [];\r\n    let inputProps = {};\r\n    input = _.remove(childrenArray, (item) => {\r\n      if (item.type === Input) {\r\n        inputProps = item.props;\r\n        this.inputProps = item.props;\r\n        return item;\r\n      }\r\n    });\r\n\r\n    let icon = [];\r\n    let iconProps = {};\r\n    icon = _.remove(childrenArray, (item) => {\r\n      if (item.type === Icon) {\r\n        iconProps = item.props;\r\n        return item;\r\n      }\r\n    });\r\n    if(this.props.floatingLabel && icon.length) {\r\n        newChildren.push(<Icon key=\"i1\" {...iconProps} style={{ top: 6 }} />);\r\n        newChildren.push(<Animated.View key=\"float\" style={{ position: 'absolute', left: (this.props.last) ? 22 : 22, right: 0, top: this.state.topAnim, opacity: this.state.opacAnim, paddingTop: (Platform.OS === 'ios') ? undefined : undefined, paddingBottom: (Platform.OS === 'ios') ? undefined : 12 }}><Label {...labelProps} >{this.renderLabel(label, labelProps)}</Label></Animated.View>);\r\n        newChildren.push(<Input key=\"l2\" {...inputProps} onFocus={() => {this.setState({ isFocused: true }); (inputProps.onFocus) && inputProps.onFocus()}} onBlur={() => {!(this.state.text.length) && this.setState({ isFocused: false }); (inputProps.onBlur) && inputProps.onBlur()}} onChangeText={text => {this.setState({ text }); (inputProps.onChangeText) && inputProps.onChangeText(text) }} />);\r\n    }\r\n    else if (this.props.floatingLabel) {\r\n        newChildren.push(<Animated.View key=\"float\" style={{ position: 'absolute', left: (this.props.last) ? 15 : 0, right: 0, top: this.state.topAnim, opacity: this.state.opacAnim, paddingTop: (Platform.OS === 'ios') ? undefined : undefined, paddingBottom: (Platform.OS === 'ios') ? undefined : 12 }}><Label {...labelProps}>{this.renderLabel(label, labelProps)}</Label></Animated.View>);\r\n        newChildren.push(<Input ref={(c) => this._inputRef = c} value={this.state.text} key=\"l2\" {...inputProps}  onFocus={() => {this.setState({ isFocused: true }); (inputProps.onFocus) && inputProps.onFocus()}} onBlur={() => {!(this.state.text.length) && this.setState({ isFocused: false }); (inputProps.onBlur) && inputProps.onBlur()}} onChangeText={text => {this.setState({ text }); (inputProps.onChangeText) && inputProps.onChangeText(text) }} />);\r\n    }\r\n    else if (this.props.stackedLabel && icon.length) {\r\n      newChildren.push(<View key=\"s\" style={{ flexDirection: 'row', flex: 1, width: variables.deviceWidth - 15 }}><Icon key=\"s1\" {...iconProps} style={{ marginTop: 36 }} /><View style={{ flexDirection: 'column' }}><Label key=\"s2\" {...labelProps}></Label><Input key=\"s3\" {...inputProps} style={{ width: variables.deviceWidth - 40 }} /></View></View>);\r\n\r\n    }\r\n    else {\r\n      return this.props.children;\r\n    }\r\n    return newChildren;\r\n  }\r\n  getInitialStyle() {\r\n    return {\r\n      roundedInputGroup: {\r\n        borderWidth: (this.props.rounded) ? (variables.borderWidth * 2) : undefined,\r\n        borderRadius: (this.props.rounded) ? variables.inputGroupRoundedBorderRadius : undefined,\r\n      },\r\n    };\r\n  }\r\n\r\n  prepareRootProps() {\r\n    const defaultProps = {\r\n      style: this.getInitialStyle().roundedInputGroup,\r\n    };\r\n\r\n    return computeProps(this.props, defaultProps);\r\n  }\r\n  render() {\r\n    return (\r\n      <TouchableOpacity ref={c => this._root = c} {...this.prepareRootProps()} activeOpacity={1}>\r\n        {this.renderChildren()}\r\n      </TouchableOpacity>\r\n    );\r\n  }\r\n}\r\n\r\nconst childrenType = function (props, propName, component) {\r\n  let error;\r\n  const prop = props[propName];\r\n  if (!props.children.length) {\r\n    error = new Error(`${component} should have both Label and Input components`);\r\n  } else if (props.children[0].type.displayName !== 'Styled(Label)' || props.children[1].type.displayName !== 'Styled(Input)') {\r\n    error = new Error(`${component} should have Label and Input components only`);\r\n  }\r\n  return error;\r\n};\r\n\r\nItem.propTypes = {\r\n  ...TouchableOpacity.propTypes,\r\n  style: React.PropTypes.object,\r\n  inlineLabel: React.PropTypes.bool,\r\n  floatingLabel: React.PropTypes.bool,\r\n  stackedLabel: React.PropTypes.bool,\r\n  fixedLabel: React.PropTypes.bool,\r\n  success: React.PropTypes.bool,\r\n  error: React.PropTypes.bool,\r\n};\r\n\r\nconst StyledItem = connectStyle('NativeBase.Item', {}, mapPropsToStyleNames)(Item);\r\n\r\nexport {\r\n  StyledItem as Item,\r\n};\r\n"]}