{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","PropTypes","Component","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","InteractionManager","Platform","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","createClass","mixins","statics","propTypes","tabBarPosition","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","props","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","OS","x","state","scrollTo","animated","setTimeout","runAfterInteractions","componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","y","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","e","offsetX","nativeEvent","contentOffset","_updateScrollValue","_onMomentumScrollBeginAndEnd","map","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","i","ref","from","value","setValue","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","left","right","styles","container","module","exports","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["const React = require('react');\r\nconst {\r\n  PropTypes,\r\n  Component,\r\n} = React;\r\nconst ReactNative = require('react-native');\r\nconst {\r\n  Dimensions,\r\n  View,\r\n  Animated,\r\n  ScrollView,\r\n  StyleSheet,\r\n  InteractionManager,\r\n  Platform,\r\n} = ReactNative;\r\nconst TimerMixin = require('react-timer-mixin');\r\nimport _ from 'lodash';\r\n\r\nconst SceneComponent = require('./SceneComponent');\r\nconst { DefaultTabBar } = require('./DefaultTabBar');\r\nconst { ScrollableTabBar } = require('./ScrollableTabBar');\r\n\r\n\r\nconst ScrollableTabView = React.createClass({\r\n  mixins: [TimerMixin, ],\r\n  statics: {\r\n    DefaultTabBar,\r\n    ScrollableTabBar,\r\n  },\r\n\r\n  propTypes: {\r\n    tabBarPosition: PropTypes.oneOf(['top', 'bottom', 'overlayTop', 'overlayBottom', ]),\r\n    initialPage: PropTypes.number,\r\n    page: PropTypes.number,\r\n    onChangeTab: PropTypes.func,\r\n    onScroll: PropTypes.func,\r\n    renderTabBar: PropTypes.any,\r\n    style: View.propTypes.style,\r\n    contentProps: PropTypes.object,\r\n    scrollWithoutAnimation: PropTypes.bool,\r\n    locked: PropTypes.bool,\r\n    prerenderingSiblingsNumber: PropTypes.number,\r\n  },\r\n\r\n  getDefaultProps() {\r\n    return {\r\n      tabBarPosition: 'top',\r\n      initialPage: 0,\r\n      page: -1,\r\n      onChangeTab: () => {},\r\n      onScroll: () => {},\r\n      contentProps: {},\r\n      scrollWithoutAnimation: false,\r\n      locked: false,\r\n      prerenderingSiblingsNumber: 0,\r\n    };\r\n  },\r\n\r\n  getInitialState() {\r\n    return {\r\n      currentPage: this.props.initialPage,\r\n      scrollValue: new Animated.Value(this.props.initialPage),\r\n      containerWidth: Dimensions.get('window').width,\r\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage, }),\r\n    };\r\n  },\r\n\r\n  componentDidMount() {\r\n    const scrollFn = () => {\r\n      if (this.scrollView && Platform.OS === 'android') {\r\n        const x = this.props.initialPage * this.state.containerWidth;\r\n        this.scrollView.scrollTo({ x, animated: false });\r\n      }\r\n    };\r\n    this.setTimeout(() => {\r\n      InteractionManager.runAfterInteractions(scrollFn);\r\n    }, 0);\r\n  },\r\n\r\n  componentWillReceiveProps(props) {\r\n    if (props.children !== this.props.children) {\r\n      this.updateSceneKeys({ page: this.state.currentPage, children: props.children, });\r\n    }\r\n\r\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\r\n      this.goToPage(props.page);\r\n    }\r\n  },\r\n\r\n  goToPage(pageNumber) {\r\n    const offset = pageNumber * this.state.containerWidth;\r\n    if (this.scrollView) {\r\n      this.scrollView.scrollTo({x: offset, y: 0, animated: !this.props.scrollWithoutAnimation, });\r\n    }\r\n\r\n    const currentPage = this.state.currentPage;\r\n    this.updateSceneKeys({\r\n      page: pageNumber,\r\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber),\r\n    });\r\n  },\r\n\r\n  renderTabBar(props) {\r\n    if (this.props.renderTabBar === false) {\r\n      return null;\r\n    } else if (this.props.renderTabBar) {\r\n      return React.cloneElement(this.props.renderTabBar(props), props);\r\n    } else {\r\n      return <DefaultTabBar {...props} />;\r\n    }\r\n  },\r\n\r\n  updateSceneKeys({ page, children = this.props.children, callback = () => {}, }) {\r\n    let newKeys = this.newSceneKeys({ previousKeys: this.state.sceneKeys, currentPage: page, children, });\r\n    this.setState({currentPage: page, sceneKeys: newKeys, }, callback);\r\n  },\r\n\r\n  newSceneKeys({ previousKeys = [], currentPage = 0, children = this.props.children, }) {\r\n    let newKeys = [];\r\n    this._children(children).forEach((child, idx) => {\r\n      let key = this._makeSceneKey(child, idx);\r\n      if (this._keyExists(previousKeys, key) ||\r\n        this._shouldRenderSceneKey(idx, currentPage)) {\r\n        newKeys.push(key);\r\n      }\r\n    });\r\n    return newKeys;\r\n  },\r\n\r\n  _shouldRenderSceneKey(idx, currentPageKey) {\r\n    let numOfSibling = this.props.prerenderingSiblingsNumber;\r\n    return (idx < (currentPageKey + numOfSibling + 1) &&\r\n      idx > (currentPageKey - numOfSibling - 1));\r\n  },\r\n\r\n  _keyExists(sceneKeys, key) {\r\n    return sceneKeys.find((sceneKey) => key === sceneKey);\r\n  },\r\n\r\n  _makeSceneKey(child, idx) {\r\n    return child.props.heading + '_' + idx;\r\n  },\r\n\r\n  renderScrollableContent() {\r\n    const scenes = this._composeScenes();\r\n    return <ScrollView\r\n      horizontal\r\n      pagingEnabled\r\n      automaticallyAdjustContentInsets={false}\r\n      contentOffset={{ x: this.props.initialPage * this.state.containerWidth, }}\r\n      ref={(scrollView) => { this.scrollView = scrollView; }}\r\n      onScroll={(e) => {\r\n        const offsetX = e.nativeEvent.contentOffset.x;\r\n        this._updateScrollValue(offsetX / this.state.containerWidth);\r\n      }}\r\n      onMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\r\n      onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\r\n      scrollEventThrottle={16}\r\n      scrollsToTop={false}\r\n      showsHorizontalScrollIndicator={false}\r\n      scrollEnabled={!this.props.locked}\r\n      directionalLockEnabled\r\n      alwaysBounceVertical={false}\r\n      keyboardDismissMode=\"on-drag\"\r\n      {...this.props.contentProps}\r\n      >\r\n      {scenes}\r\n    </ScrollView>;\r\n  },\r\n\r\n  _composeScenes() {\r\n    return this._children().map((child, idx) => {\r\n      let key = this._makeSceneKey(child, idx);\r\n      return <SceneComponent\r\n        key={child.key}\r\n        shouldUpdated={this._shouldRenderSceneKey(idx, this.state.currentPage)}\r\n        style={{width: this.state.containerWidth, }}\r\n      >\r\n        {this._keyExists(this.state.sceneKeys, key) ? child : <View heading={child.props.heading}/>}\r\n      </SceneComponent>;\r\n    });\r\n  },\r\n\r\n  _onMomentumScrollBeginAndEnd(e) {\r\n    const offsetX = e.nativeEvent.contentOffset.x;\r\n    const page = Math.round(offsetX / this.state.containerWidth);\r\n    if (this.state.currentPage !== page) {\r\n      this._updateSelectedPage(page);\r\n    }\r\n  },\r\n\r\n  _updateSelectedPage(nextPage) {\r\n    let localNextPage = nextPage;\r\n    if (typeof localNextPage === 'object') {\r\n      localNextPage = nextPage.nativeEvent.position;\r\n    }\r\n\r\n    const currentPage = this.state.currentPage;\r\n    this.updateSceneKeys({\r\n      page: localNextPage,\r\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage),\r\n    });\r\n  },\r\n\r\n  _onChangeTab(prevPage, currentPage) {\r\n    this.props.onChangeTab({\r\n      i: currentPage,\r\n      ref: this._children()[currentPage],\r\n      from: prevPage,\r\n    });\r\n  },\r\n\r\n  _updateScrollValue(value) {\r\n    this.state.scrollValue.setValue(value);\r\n    this.props.onScroll(value);\r\n  },\r\n\r\n  _handleLayout(e) {\r\n    const { width, } = e.nativeEvent.layout;\r\n\r\n    if (Math.round(width) !== Math.round(this.state.containerWidth)) {\r\n      this.setState({ containerWidth: width, });\r\n      this.requestAnimationFrame(() => {\r\n        this.goToPage(this.state.currentPage);\r\n      });\r\n    }\r\n  },\r\n\r\n  _children(children = this.props.children) {\r\n    return React.Children.map(children, (child) => child);\r\n  },\r\n\r\n  render() {\r\n    let overlayTabs = (this.props.tabBarPosition === 'overlayTop' || this.props.tabBarPosition === 'overlayBottom');\r\n    let tabBarProps = {\r\n      goToPage: this.goToPage,\r\n      tabs: this._children().map((child) => child.props.heading),\r\n      tabStyle: this._children().map((child) => child.props.tabStyle),\r\n      activeTabStyle: this._children().map((child) => child.props.activeTabStyle),\r\n      textStyle: this._children().map((child) => child.props.textStyle),\r\n      activeTextStyle: this._children().map((child) => child.props.activeTextStyle),\r\n      tabHeaderStyle: this._children().map((child) => _.get(child.props.heading.props, 'style', undefined)),\r\n      activeTab: this.state.currentPage,\r\n      scrollValue: this.state.scrollValue,\r\n      containerWidth: this.state.containerWidth,\r\n    };\r\n\r\n    if (this.props.tabBarBackgroundColor) {\r\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\r\n    }\r\n    if (this.props.tabBarActiveTextColor) {\r\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\r\n    }\r\n    if (this.props.tabBarInactiveTextColor) {\r\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\r\n    }\r\n    if (this.props.tabBarTextStyle) {\r\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\r\n    }\r\n    if (this.props.tabBarUnderlineStyle) {\r\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\r\n    }\r\n    if (overlayTabs) {\r\n      tabBarProps.style = {\r\n        position: 'absolute',\r\n        left: 0,\r\n        right: 0,\r\n        [this.props.tabBarPosition === 'overlayTop' ? 'top' : 'bottom']: 0,\r\n      };\r\n    }\r\n\r\n    return <View style={[styles.container, this.props.style, ]} onLayout={this._handleLayout}>\r\n      {this.props.tabBarPosition === 'top' && this.renderTabBar(tabBarProps)}\r\n      {this.renderScrollableContent()}\r\n      {(this.props.tabBarPosition === 'bottom' || overlayTabs) && this.renderTabBar(tabBarProps)}\r\n    </View>;\r\n  },\r\n});\r\n\r\nmodule.exports = ScrollableTabView;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  scrollableContentAndroid: {\r\n    flex: 1,\r\n  },\r\n});\r\n"]}