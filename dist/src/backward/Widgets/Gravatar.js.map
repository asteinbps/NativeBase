{"version":3,"sources":["../../../../src/backward/Widgets/Gravatar.js"],"names":["GRAVATAR_URI","Gravatar","gravatar","borderRadius","props","size","width","height","resizeMode","contain","undefined","gravatarStyle","circular","square","defaultProps","style","merge","getInitialStyle","prepareRootProps","uri","email","_root","c","propTypes","PropTypes","string","isRequired","object","number","bool","StyledGravatar"],"mappings":";;AAEA,4B;AACA;AACA;AACA,8B;AACA,sC;AACA,sE;AACA,iE;AACA,sD;;AAEA,GAAMA,cAAe,kCAArB,C;;AAEMC,Q;;;AAGc;AAChB,MAAO;AACLC,SAAU;AACRC,aAAc,KAAKC,KAAL,CAAWC,IAAX,CAAkB,KAAKD,KAAL,CAAWC,IAAX,CAAkB,CAApC,CAAwC,EAD9C;AAERC,MAAO,KAAKF,KAAL,CAAWC,IAAX,CAAkB,KAAKD,KAAL,CAAWC,IAA7B,CAAoC,EAFnC;AAGRE,OAAQ,KAAKH,KAAL,CAAWC,IAAX,CAAkB,KAAKD,KAAL,CAAWC,IAA7B,CAAoC,EAHpC;AAIRG,WAAY,KAAKJ,KAAL,CAAWK,OAAX,CAAqB,SAArB,CAAiCC,SAJrC,CADL,CAAP;;;AAQD,C;;AAEkB;AACjB,GAAMC,eAAgB,EAAtB;AACA,GAAI,KAAKP,KAAL,CAAWQ,QAAf,CAAyB;AACvBD,cAAcL,KAAd,CAAsB,KAAKF,KAAL,CAAWC,IAAjC;AACAM,cAAcJ,MAAd,CAAuB,KAAKH,KAAL,CAAWC,IAAlC;AACAM,cAAcR,YAAd,CAA6B,KAAKC,KAAL,CAAWC,IAAX,CAAkB,CAA/C;AACD,CAJD,IAIO,IAAI,KAAKD,KAAL,CAAWS,MAAf,CAAuB;AAC5BF,cAAcL,KAAd,CAAsB,KAAKF,KAAL,CAAWC,IAAjC;AACAM,cAAcJ,MAAd,CAAuB,KAAKH,KAAL,CAAWC,IAAlC;AACAM,cAAcR,YAAd,CAA6B,CAA7B;AACD;;AAED,GAAMW,cAAe;AACnBC,MAAO,iBAAEC,KAAF,CAAQ,KAAKC,eAAL,GAAuBf,QAA/B,CAAyCS,aAAzC,CADY,CAArB;;;AAIA,MAAO,2BAAa,KAAKP,KAAlB,CAAyBU,YAAzB,CAAP;AACD,C;;AAEQ;AACP,GAAMV,OAAQ,KAAKc,gBAAL,EAAd;;AAEA,GAAMC,KAASnB,aAAe,wBAAI,KAAKI,KAAL,CAAWgB,KAAf,CAAxB,OAAmDhB,MAAMW,KAAN,CAAYR,MAArE;AACA;AACE,2DAAO,IAAK,sBAAK,QAAKc,KAAL,CAAaC,CAAlB,EAAZ,EAAqClB,KAArC,EAA4C,OAAQ,CAAEe,OAAF,CAApD,GADF;;AAGD,C;;;AAGHlB,SAASsB,SAAT;AACK,mBAAMA,SADX;AAEEH,MAAO,gBAAMI,SAAN,CAAgBC,MAAhB,CAAuBC,UAFhC;AAGEX,MAAO,gBAAMS,SAAN,CAAgBG,MAHzB;AAIEtB,KAAM,gBAAMmB,SAAN,CAAgBI,MAJxB;AAKEhB,SAAU,gBAAMY,SAAN,CAAgBK,IAL5B;AAMEhB,OAAQ,gBAAMW,SAAN,CAAgBK,IAN1B;;;AASA,GAAMC,gBAAiB,wBAAa,qBAAb,CAAoC,EAApC,iCAA8D7B,QAA9D,CAAvB,C;;AAEoBA,Q,CAAlB6B,c","file":"Gravatar.js","sourcesContent":["/* @flow */\r\n\r\nimport React from 'react';\r\nimport { Image } from 'react-native';\r\nimport { connectStyle } from '@shoutem/theme';\r\nimport _ from 'lodash';\r\nimport md5 from 'blueimp-md5';\r\nimport mapPropsToStyleNames from '../../Utils/mapPropsToStyleNames';\r\nimport NativeBaseComponent from '../Base/NativeBaseComponent';\r\nimport computeProps from '../../Utils/computeProps';\r\n\r\nconst GRAVATAR_URI = 'https://www.gravatar.com/avatar/';\r\n\r\nclass Gravatar extends NativeBaseComponent {\r\n\r\n\r\n  getInitialStyle() {\r\n    return {\r\n      gravatar: {\r\n        borderRadius: this.props.size ? this.props.size / 2 : 15,\r\n        width: this.props.size ? this.props.size : 30,\r\n        height: this.props.size ? this.props.size : 30,\r\n        resizeMode: this.props.contain ? 'contain' : undefined,\r\n      },\r\n    };\r\n  }\r\n\r\n  prepareRootProps() {\r\n    const gravatarStyle = {};\r\n    if (this.props.circular) {\r\n      gravatarStyle.width = this.props.size;\r\n      gravatarStyle.height = this.props.size;\r\n      gravatarStyle.borderRadius = this.props.size / 2;\r\n    } else if (this.props.square) {\r\n      gravatarStyle.width = this.props.size;\r\n      gravatarStyle.height = this.props.size;\r\n      gravatarStyle.borderRadius = 0;\r\n    }\r\n\r\n    const defaultProps = {\r\n      style: _.merge(this.getInitialStyle().gravatar, gravatarStyle),\r\n    };\r\n\r\n    return computeProps(this.props, defaultProps);\r\n  }\r\n\r\n  render() {\r\n    const props = this.prepareRootProps();\r\n\r\n    const uri = `${GRAVATAR_URI + md5(this.props.email)}?s=${props.style.height}`;\r\n    return (\r\n      <Image ref={c => this._root = c} {...props} source={{ uri }} />\r\n    );\r\n  }\r\n}\r\n\r\nGravatar.propTypes = {\r\n  ...Image.propTypes,\r\n  email: React.PropTypes.string.isRequired,\r\n  style: React.PropTypes.object,\r\n  size: React.PropTypes.number,\r\n  circular: React.PropTypes.bool,\r\n  square: React.PropTypes.bool,\r\n};\r\n\r\nconst StyledGravatar = connectStyle('NativeBase.Gravatar', {}, mapPropsToStyleNames)(Gravatar);\r\nexport {\r\n  StyledGravatar as Gravatar,\r\n};\r\n"]}